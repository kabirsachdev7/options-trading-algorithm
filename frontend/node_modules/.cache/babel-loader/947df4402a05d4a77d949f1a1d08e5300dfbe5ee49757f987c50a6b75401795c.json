{"ast":null,"code":"import _objectSpread from\"/Users/kabirsachdev/Documents/options-trading-algorithm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// frontend/src/components/Dashboard.js\nimport React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Container,Form,Button,Alert,Spinner,Tabs,Tab}from\"react-bootstrap\";import StrategyList from\"./StrategyList\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{const[tickers,setTickers]=useState([]);const[selectedTicker,setSelectedTicker]=useState(\"\");const[predictions,setPredictions]=useState({});const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);useEffect(()=>{// Initialize WebSocket connection to backend\nconst wsUrl=\"\".concat(process.env.REACT_APP_API_URL.replace(/^http/,\"ws\"),\"/ws\");const ws=new WebSocket(wsUrl);ws.onmessage=event=>{// Expecting messages in JSON format containing\n// { ticker, predicted_close, recommended_strategies }\ntry{const message=JSON.parse(event.data);const{ticker,predicted_close,recommended_strategies}=message;setPredictions(prev=>_objectSpread(_objectSpread({},prev),{},{[ticker]:{predicted_close,recommended_strategies}}));}catch(err){console.error(\"Error parsing WebSocket message:\",err);}};ws.onerror=errorEvent=>{console.error(\"WebSocket error:\",errorEvent);};ws.onclose=()=>{console.log(\"WebSocket connection closed.\");};return()=>{ws.close();};},[]);const handleAddTicker=()=>{const ticker=selectedTicker.trim().toUpperCase();if(ticker&&!tickers.includes(ticker)){setTickers([...tickers,ticker]);setSelectedTicker(\"\");fetchPrediction(ticker);}};const fetchPrediction=async ticker=>{try{setLoading(true);const response=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/predict\"),{ticker},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});setPredictions(prev=>_objectSpread(_objectSpread({},prev),{},{[ticker]:response.data}));setLoading(false);}catch(err){setPredictions(prev=>_objectSpread(_objectSpread({},prev),{},{[ticker]:{error:err.response?err.response.data.detail:\"Server Error\"}}));setError(\"Failed to fetch prediction. \"+(err.response?err.response.data.detail:\"\"));setLoading(false);}};return/*#__PURE__*/_jsxs(Container,{style:{marginTop:\"50px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Options Trading Dashboard\"}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex mt-4\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Ticker Symbol (e.g., AAPL)\",value:selectedTicker,onChange:e=>setSelectedTicker(e.target.value)}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"ms-2\",onClick:handleAddTicker,children:\"Add\"})]}),loading&&/*#__PURE__*/_jsx(Spinner,{animation:\"border\",className:\"mt-3\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",className:\"mt-3\",children:error}),tickers.length>0?/*#__PURE__*/_jsx(Tabs,{defaultActiveKey:tickers[0],id:\"stock-tabs\",className:\"mt-4\",fill:true,children:tickers.map(ticker=>/*#__PURE__*/_jsx(Tab,{eventKey:ticker,title:ticker,children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:predictions[ticker]?predictions[ticker].error?/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:predictions[ticker].error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Predicted Close Price: $\",predictions[ticker].predicted_close]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Recommended Strategies:\"}),/*#__PURE__*/_jsx(StrategyList,{strategies:predictions[ticker].recommended_strategies})]}):/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})})},ticker))}):/*#__PURE__*/_jsx(\"p\",{className:\"mt-4\",children:\"No tickers added yet. Please add a ticker to view predictions and strategies.\"})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Container","Form","Button","Alert","Spinner","Tabs","Tab","StrategyList","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","tickers","setTickers","selectedTicker","setSelectedTicker","predictions","setPredictions","error","setError","loading","setLoading","wsUrl","concat","process","env","REACT_APP_API_URL","replace","ws","WebSocket","onmessage","event","message","JSON","parse","data","ticker","predicted_close","recommended_strategies","prev","_objectSpread","err","console","onerror","errorEvent","onclose","log","close","handleAddTicker","trim","toUpperCase","includes","fetchPrediction","response","post","headers","Authorization","localStorage","getItem","detail","style","marginTop","children","className","Control","type","placeholder","value","onChange","e","target","variant","onClick","animation","length","defaultActiveKey","id","fill","map","eventKey","title","strategies"],"sources":["/Users/kabirsachdev/Documents/options-trading-algorithm/frontend/src/components/Dashboard.js"],"sourcesContent":["// frontend/src/components/Dashboard.js\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  Container,\n  Form,\n  Button,\n  Alert,\n  Spinner,\n  Tabs,\n  Tab,\n} from \"react-bootstrap\";\nimport StrategyList from \"./StrategyList\";\n\nconst Dashboard = () => {\n  const [tickers, setTickers] = useState([]);\n  const [selectedTicker, setSelectedTicker] = useState(\"\");\n  const [predictions, setPredictions] = useState({});\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    // Initialize WebSocket connection to backend\n    const wsUrl = `${process.env.REACT_APP_API_URL.replace(/^http/, \"ws\")}/ws`;\n    const ws = new WebSocket(wsUrl);\n\n    ws.onmessage = (event) => {\n      // Expecting messages in JSON format containing\n      // { ticker, predicted_close, recommended_strategies }\n      try {\n        const message = JSON.parse(event.data);\n        const { ticker, predicted_close, recommended_strategies } = message;\n        setPredictions((prev) => ({\n          ...prev,\n          [ticker]: {\n            predicted_close,\n            recommended_strategies,\n          },\n        }));\n      } catch (err) {\n        console.error(\"Error parsing WebSocket message:\", err);\n      }\n    };\n\n    ws.onerror = (errorEvent) => {\n      console.error(\"WebSocket error:\", errorEvent);\n    };\n\n    ws.onclose = () => {\n      console.log(\"WebSocket connection closed.\");\n    };\n\n    return () => {\n      ws.close();\n    };\n  }, []);\n\n  const handleAddTicker = () => {\n    const ticker = selectedTicker.trim().toUpperCase();\n    if (ticker && !tickers.includes(ticker)) {\n      setTickers([...tickers, ticker]);\n      setSelectedTicker(\"\");\n      fetchPrediction(ticker);\n    }\n  };\n\n  const fetchPrediction = async (ticker) => {\n    try {\n      setLoading(true);\n      const response = await axios.post(\n        `${process.env.REACT_APP_API_URL}/predict`,\n        { ticker },\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        }\n      );\n      setPredictions((prev) => ({\n        ...prev,\n        [ticker]: response.data,\n      }));\n      setLoading(false);\n    } catch (err) {\n      setPredictions((prev) => ({\n        ...prev,\n        [ticker]: {\n          error: err.response ? err.response.data.detail : \"Server Error\",\n        },\n      }));\n      setError(\n        \"Failed to fetch prediction. \" +\n          (err.response ? err.response.data.detail : \"\")\n      );\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container style={{ marginTop: \"50px\" }}>\n      <h2>Options Trading Dashboard</h2>\n\n      <Form className=\"d-flex mt-4\">\n        <Form.Control\n          type=\"text\"\n          placeholder=\"Enter Ticker Symbol (e.g., AAPL)\"\n          value={selectedTicker}\n          onChange={(e) => setSelectedTicker(e.target.value)}\n        />\n        <Button variant=\"primary\" className=\"ms-2\" onClick={handleAddTicker}>\n          Add\n        </Button>\n      </Form>\n\n      {loading && <Spinner animation=\"border\" className=\"mt-3\" />}\n\n      {error && (\n        <Alert variant=\"danger\" className=\"mt-3\">\n          {error}\n        </Alert>\n      )}\n\n      {tickers.length > 0 ? (\n        <Tabs\n          defaultActiveKey={tickers[0]}\n          id=\"stock-tabs\"\n          className=\"mt-4\"\n          fill\n        >\n          {tickers.map((ticker) => (\n            <Tab eventKey={ticker} title={ticker} key={ticker}>\n              <div className=\"mt-3\">\n                {predictions[ticker] ? (\n                  predictions[ticker].error ? (\n                    <Alert variant=\"danger\">{predictions[ticker].error}</Alert>\n                  ) : (\n                    <>\n                      <h4>\n                        Predicted Close Price: $\n                        {predictions[ticker].predicted_close}\n                      </h4>\n                      <h5>Recommended Strategies:</h5>\n                      <StrategyList\n                        strategies={predictions[ticker].recommended_strategies}\n                      />\n                    </>\n                  )\n                ) : (\n                  <Spinner animation=\"border\" />\n                )}\n              </div>\n            </Tab>\n          ))}\n        </Tabs>\n      ) : (\n        <p className=\"mt-4\">\n          No tickers added yet. Please add a ticker to view predictions and\n          strategies.\n        </p>\n      )}\n    </Container>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}