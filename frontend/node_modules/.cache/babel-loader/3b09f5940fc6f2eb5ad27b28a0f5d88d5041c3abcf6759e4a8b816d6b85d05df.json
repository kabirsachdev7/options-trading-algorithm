{"ast":null,"code":"import _objectSpread from\"/Users/kabirsachdev/Documents/options-trading-algorithm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// frontend/src/components/Dashboard.js\nimport React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Container,Form,Button,Alert,Spinner,Tabs,Tab}from\"react-bootstrap\";import StrategyList from\"./StrategyList\";import io from\"socket.io-client\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{const[tickers,setTickers]=useState([]);const[selectedTicker,setSelectedTicker]=useState(\"\");const[predictions,setPredictions]=useState({});const[error]=useState(\"\");const[loading,setLoading]=useState(false);const[socket,setSocket]=useState(null);useEffect(()=>{// Initialize WebSocket connection\nconst newSocket=io(\"\".concat(process.env.REACT_APP_API_URL.replace(/^http/,\"ws\"),\"/ws\"));setSocket(newSocket);return()=>newSocket.close();},[setSocket]);useEffect(()=>{if(socket){socket.on(\"message\",data=>{const message=JSON.parse(data);const{ticker,predicted_close,recommended_strategies}=message;setPredictions(prev=>_objectSpread(_objectSpread({},prev),{},{[ticker]:{predicted_close,recommended_strategies}}));});}},[socket]);const handleAddTicker=()=>{const ticker=selectedTicker.trim().toUpperCase();if(ticker&&!tickers.includes(ticker)){setTickers([...tickers,ticker]);setSelectedTicker(\"\");fetchPrediction(ticker);}};const fetchPrediction=async ticker=>{try{setLoading(true);const response=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/predict\"),{ticker},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});setPredictions(prev=>_objectSpread(_objectSpread({},prev),{},{[ticker]:response.data}));setLoading(false);}catch(err){setPredictions(prev=>_objectSpread(_objectSpread({},prev),{},{[ticker]:{error:err.response?err.response.data.detail:\"Server Error\"}}));setLoading(false);}};return/*#__PURE__*/_jsxs(Container,{style:{marginTop:\"50px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Options Trading Dashboard\"}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex mt-4\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Ticker Symbol (e.g., AAPL)\",value:selectedTicker,onChange:e=>setSelectedTicker(e.target.value)}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"ms-2\",onClick:handleAddTicker,children:\"Add\"})]}),loading&&/*#__PURE__*/_jsx(Spinner,{animation:\"border\",className:\"mt-3\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",className:\"mt-3\",children:error}),tickers.length>0?/*#__PURE__*/_jsx(Tabs,{defaultActiveKey:tickers[0],id:\"stock-tabs\",className:\"mt-4\",fill:true,children:tickers.map(ticker=>/*#__PURE__*/_jsx(Tab,{eventKey:ticker,title:ticker,children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:predictions[ticker]?predictions[ticker].error?/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:predictions[ticker].error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Predicted Close Price: $\",predictions[ticker].predicted_close]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Recommended Strategies:\"}),/*#__PURE__*/_jsx(StrategyList,{strategies:predictions[ticker].recommended_strategies})]}):/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})})},ticker))}):/*#__PURE__*/_jsx(\"p\",{className:\"mt-4\",children:\"No tickers added yet. Please add a ticker to view predictions and strategies.\"})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Container","Form","Button","Alert","Spinner","Tabs","Tab","StrategyList","io","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","tickers","setTickers","selectedTicker","setSelectedTicker","predictions","setPredictions","error","loading","setLoading","socket","setSocket","newSocket","concat","process","env","REACT_APP_API_URL","replace","close","on","data","message","JSON","parse","ticker","predicted_close","recommended_strategies","prev","_objectSpread","handleAddTicker","trim","toUpperCase","includes","fetchPrediction","response","post","headers","Authorization","localStorage","getItem","err","detail","style","marginTop","children","className","Control","type","placeholder","value","onChange","e","target","variant","onClick","animation","length","defaultActiveKey","id","fill","map","eventKey","title","strategies"],"sources":["/Users/kabirsachdev/Documents/options-trading-algorithm/frontend/src/components/Dashboard.js"],"sourcesContent":["// frontend/src/components/Dashboard.js\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  Container,\n  Form,\n  Button,\n  Alert,\n  Spinner,\n  Tabs,\n  Tab,\n} from \"react-bootstrap\";\nimport StrategyList from \"./StrategyList\";\nimport io from \"socket.io-client\";\n\nconst Dashboard = () => {\n  const [tickers, setTickers] = useState([]);\n  const [selectedTicker, setSelectedTicker] = useState(\"\");\n  const [predictions, setPredictions] = useState({});\n  const [error] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [socket, setSocket] = useState(null);\n\n  useEffect(() => {\n    // Initialize WebSocket connection\n    const newSocket = io(\n      `${process.env.REACT_APP_API_URL.replace(/^http/, \"ws\")}/ws`\n    );\n    setSocket(newSocket);\n    return () => newSocket.close();\n  }, [setSocket]);\n\n  useEffect(() => {\n    if (socket) {\n      socket.on(\"message\", (data) => {\n        const message = JSON.parse(data);\n        const { ticker, predicted_close, recommended_strategies } = message;\n        setPredictions((prev) => ({\n          ...prev,\n          [ticker]: {\n            predicted_close,\n            recommended_strategies,\n          },\n        }));\n      });\n    }\n  }, [socket]);\n\n  const handleAddTicker = () => {\n    const ticker = selectedTicker.trim().toUpperCase();\n    if (ticker && !tickers.includes(ticker)) {\n      setTickers([...tickers, ticker]);\n      setSelectedTicker(\"\");\n      fetchPrediction(ticker);\n    }\n  };\n\n  const fetchPrediction = async (ticker) => {\n    try {\n      setLoading(true);\n      const response = await axios.post(\n        `${process.env.REACT_APP_API_URL}/predict`,\n        {\n          ticker,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        }\n      );\n      setPredictions((prev) => ({\n        ...prev,\n        [ticker]: response.data,\n      }));\n      setLoading(false);\n    } catch (err) {\n      setPredictions((prev) => ({\n        ...prev,\n        [ticker]: {\n          error: err.response ? err.response.data.detail : \"Server Error\",\n        },\n      }));\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container style={{ marginTop: \"50px\" }}>\n      <h2>Options Trading Dashboard</h2>\n\n      <Form className=\"d-flex mt-4\">\n        <Form.Control\n          type=\"text\"\n          placeholder=\"Enter Ticker Symbol (e.g., AAPL)\"\n          value={selectedTicker}\n          onChange={(e) => setSelectedTicker(e.target.value)}\n        />\n        <Button variant=\"primary\" className=\"ms-2\" onClick={handleAddTicker}>\n          Add\n        </Button>\n      </Form>\n\n      {loading && <Spinner animation=\"border\" className=\"mt-3\" />}\n\n      {error && (\n        <Alert variant=\"danger\" className=\"mt-3\">\n          {error}\n        </Alert>\n      )}\n\n      {tickers.length > 0 ? (\n        <Tabs\n          defaultActiveKey={tickers[0]}\n          id=\"stock-tabs\"\n          className=\"mt-4\"\n          fill\n        >\n          {tickers.map((ticker) => (\n            <Tab eventKey={ticker} title={ticker} key={ticker}>\n              <div className=\"mt-3\">\n                {predictions[ticker] ? (\n                  predictions[ticker].error ? (\n                    <Alert variant=\"danger\">{predictions[ticker].error}</Alert>\n                  ) : (\n                    <>\n                      <h4>\n                        Predicted Close Price: $\n                        {predictions[ticker].predicted_close}\n                      </h4>\n                      <h5>Recommended Strategies:</h5>\n                      <StrategyList\n                        strategies={predictions[ticker].recommended_strategies}\n                      />\n                      {/* Placeholder for charts or additional data */}\n                      {/* Implement charts as needed */}\n                    </>\n                  )\n                ) : (\n                  <Spinner animation=\"border\" />\n                )}\n              </div>\n            </Tab>\n          ))}\n        </Tabs>\n      ) : (\n        <p className=\"mt-4\">\n          No tickers added yet. Please add a ticker to view predictions and\n          strategies.\n        </p>\n      )}\n    </Container>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}